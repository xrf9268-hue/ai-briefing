briefing_id: ai-briefing-hackernews-optimized
briefing_title: AI 快讯 · Hacker News (Optimized)
source:
  type: hackernews
  hn_story_type: top
  hn_limit: 60
processing:
  time_window_hours: 24
  min_cluster_size: 2
  sim_near_dup: 0.93
  reranker_model: BAAI/bge-reranker-v2-m3
  initial_topk: 1000
  max_candidates_per_cluster: 300
  dedup:
    enabled: true
    fingerprint:
      enabled: true
      bits: 64
      bands: 8
      ham_thresh: 3
    semantic:
      enabled: true
      threshold: 0.92
      merge_sources: true
  clustering:
    algo: hdbscan
    min_cluster_size: 2
    attach_noise: true
  rerank:
    strategy: ce+mmr
    lambda: 0.4
    # NEW: Enable TF-IDF weighted queries for better reranking
    use_tfidf_query: true
    tfidf_top_n: 10
  packer:
    enabled: true
    budget: 6000
    per_cluster_min: 300
    per_cluster_max: 1200
  embedding:
    max_batch_tokens: 8192
    max_item_chars: 6000
    chars_per_token: 4.0
  # NEW: Keyword filtering ENABLED with default patterns
  keyword_filter:
    enabled: true
    min_score: 0.5
    top_k: 500
    boost_official_sources: true
    # Optional: Custom keyword categories (commented - uses defaults)
    # keyword_categories:
    #   llm_releases:
    #     weight: 3.0
    #     keywords:
    #       - "\\bClaude\\s+\\d+\\.?\\d*"
    #       - "\\bGPT-?\\d+"
    #       - "\\bGemini\\s+\\d+\\.?\\d*"
    #   agentic_coding:
    #     weight: 2.5
    #     keywords:
    #       - "\\bClaude\\s+Code\\b"
    #       - "\\bCursor\\b"
    # Optional: Custom official domains (commented - uses defaults)
    # official_domains:
    #   - "anthropic.com"
    #   - "openai.com"
    #   - "google.ai"
  scoring_weights:
    actionability: 3.0
    novelty: 2.0
    impact: 2.0
    reusability: 2.0
    reliability: 1.0
    # NEW: Enhanced agentic_bonus weight (2.5 instead of 1.0)
    agentic_bonus: 2.5
    source_reliability: 2.0
  # NEW: Multi-stage chain prompts enabled
  multi_stage: true
  agentic_section: true
  brief_lite: false
  max_bullets_per_topic: 4
summarization:
  # NEW: Multi-stage prompts (stage1-4)
  prompt_file: prompts/stage1_extract_facts.yaml
  temperature: 0.2
  timeout: 600
  retries: 1
  provider_options:
    openai:
      base_url: ${OPENAI_BASE_URL}
    gemini:
      api_version: v1
  openai_model: gpt-4o-mini
  llm_provider: gemini
  gemini_model: gemini-2.5-flash
  target_item_count: 10
output:
  dir: out/ai-briefing-hackernews-optimized
  formats:
  - md
  - json
  # Disable publishing for testing
  telegram:
    enabled: false
  briefing_archive:
    enabled: false
